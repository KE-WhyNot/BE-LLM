"""
í¬íŠ¸í´ë¦¬ì˜¤ ì œì•ˆ ì„œë¹„ìŠ¤ í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸
"""

import json
from app.services.portfolio_advisor import portfolio_advisor

def test_portfolio_advisor():
    """í¬íŠ¸í´ë¦¬ì˜¤ ì œì•ˆ ì„œë¹„ìŠ¤ í…ŒìŠ¤íŠ¸"""
    
    # í…ŒìŠ¤íŠ¸ ë°ì´í„° 1: ì ê·¹íˆ¬ìí˜• ì‚¬ìš©ì (ìš”êµ¬ì‚¬í•­ ì˜ˆì‹œ)
    test_data_1 = {
        "user_data": {
            "age": 29,
            "investment_type": "ì ê·¹íˆ¬ìí˜•",
            "total_capital": 50000000,
            "investment_purpose": "ì£¼íƒ ìê¸ˆ ë§ˆë ¨ (5~10ë…„)",
            "investment_experience_years": 3,
            "interested_sectors": ["ë°˜ë„ì²´", "AI", "2ì°¨ì „ì§€"]
        },
        "market_data": {
            "market_summary": "í˜„ì¬ KOSPIëŠ” ì „ì¼ ëŒ€ë¹„ 0.5% ìƒìŠ¹ ë§ˆê°í–ˆìœ¼ë©°, ë¯¸êµ­ ì—°ì¤€ì˜ ê¸ˆë¦¬ ë™ê²° ê¸°ì¡°ê°€ ìœ ì§€ë˜ê³  ìˆìŠµë‹ˆë‹¤. ì¸í”Œë ˆì´ì…˜ ë‘”í™” ì¡°ì§ì´ ë³´ì´ë‚˜, êµ­ì œ ìœ ê°€ ë³€ë™ì„±ì€ ì—¬ì „íˆ ì‹œì¥ì˜ ì£¼ìš” ë³€ìˆ˜ì…ë‹ˆë‹¤.",
            "sector_outlook": {
                "ë°˜ë„ì²´": "AI ì‹œì¥ í™•ëŒ€ë¡œ HBM(ê³ ëŒ€ì—­í­ ë©”ëª¨ë¦¬) ìˆ˜ìš”ê°€ í­ë°œì ìœ¼ë¡œ ì¦ê°€í•˜ê³  ìˆì–´, ê´€ë ¨ ê¸°ì—…ë“¤ì˜ ì‹¤ì  ê°œì„ ì´ ê¸°ëŒ€ë˜ëŠ” ê¸ì •ì ì¸ ìƒí™©ì…ë‹ˆë‹¤.",
                "AI": "ê¸€ë¡œë²Œ ë¹…í…Œí¬ ê¸°ì—…ë“¤ì˜ ê²½ìŸì ì¸ íˆ¬ìë¡œ ë‹¨ê¸°ì ì¸ ì¡°ì •ì´ ìˆì„ ìˆ˜ ìˆìœ¼ë‚˜, ì¥ê¸°ì ì¸ ì„±ì¥ì„±ì€ ë§¤ìš° ë†’ê²Œ í‰ê°€ë©ë‹ˆë‹¤.",
                "2ì°¨ì „ì§€": "ì „ê¸°ì°¨ ì‹œì¥ì˜ ì¼ì‹œì  ìˆ˜ìš” ë‘”í™”ë¡œ ë‹¨ê¸°ì ì¸ ë³€ë™ì„±ì´ í¬ì§€ë§Œ, ì¥ê¸°ì ì¸ ì¹œí™˜ê²½ ì •ì±… ê¸°ì¡°ì— ë”°ë¼ ì„±ì¥ ê°€ëŠ¥ì„±ì€ ìœ íš¨í•©ë‹ˆë‹¤.",
                "í•­ê³µì£¼": "êµ­ì œ ìœ ê°€ ì•ˆì • ë° ì—¬í–‰ ìˆ˜ìš” íšŒë³µìœ¼ë¡œ ì ì§„ì ì¸ ì‹¤ì  ê°œì„ ì´ ì˜ˆìƒë©ë‹ˆë‹¤."
            }
        }
    }
    
    # í…ŒìŠ¤íŠ¸ ë°ì´í„° 2: ì•ˆì •í˜• ì‚¬ìš©ì
    test_data_2 = {
        "user_data": {
            "age": 45,
            "investment_type": "ì•ˆì •í˜•",
            "total_capital": 100000000,
            "investment_purpose": "ë…¸í›„ ìê¸ˆ ë§ˆë ¨ (10ë…„ ì´ìƒ)",
            "investment_experience_years": 1,
            "interested_sectors": ["ì€í–‰", "í†µì‹ "]
        },
        "market_data": {
            "market_summary": "ê¸ˆë¦¬ ìƒìŠ¹ ê¸°ì¡°ë¡œ ì¸í•´ ì€í–‰ì£¼ê°€ ìƒìŠ¹ì„¸ë¥¼ ë³´ì´ê³  ìˆìœ¼ë©°, í†µì‹ ì—…ê³„ëŠ” 5G í™•ì‚°ìœ¼ë¡œ ì•ˆì •ì ì¸ ì„±ì¥ì„ ì§€ì†í•˜ê³  ìˆìŠµë‹ˆë‹¤.",
            "sector_outlook": {
                "ì€í–‰": "ê¸ˆë¦¬ ìƒìŠ¹ìœ¼ë¡œ ìˆœì´ìë§ˆì§„ í™•ëŒ€ê°€ ì˜ˆìƒë˜ì–´ ì‹¤ì  ê°œì„ ì´ ê¸°ëŒ€ë©ë‹ˆë‹¤.",
                "í†µì‹ ": "5G ì„œë¹„ìŠ¤ í™•ì‚°ê³¼ ë°ì´í„° ì‚¬ìš©ëŸ‰ ì¦ê°€ë¡œ ì•ˆì •ì ì¸ ì„±ì¥ì´ ì˜ˆìƒë©ë‹ˆë‹¤.",
                "ë°˜ë„ì²´": "AI ìˆ˜ìš” ì¦ê°€ë¡œ ì¥ê¸°ì  ì„±ì¥ ê°€ëŠ¥ì„±ì´ ë†’ì§€ë§Œ, ë‹¨ê¸°ì  ë³€ë™ì„±ì´ í´ ìˆ˜ ìˆìŠµë‹ˆë‹¤."
            }
        }
    }
    
    # í…ŒìŠ¤íŠ¸ ë°ì´í„° 3: ê³µê²©íˆ¬ìí˜• ì‚¬ìš©ì
    test_data_3 = {
        "user_data": {
            "age": 25,
            "investment_type": "ê³µê²©íˆ¬ìí˜•",
            "total_capital": 30000000,
            "investment_purpose": "ìì‚° ì¦ì‹ (10ë…„ ì´ìƒ)",
            "investment_experience_years": 5,
            "interested_sectors": ["AI", "ë°”ì´ì˜¤"]
        },
        "market_data": {
            "market_summary": "í…Œí¬ ì£¼ì‹ë“¤ì´ ì¡°ì •ì„ ë°›ê³  ìˆì§€ë§Œ, AIì™€ ë°”ì´ì˜¤ ë¶„ì•¼ëŠ” ì—¬ì „íˆ ë†’ì€ ì„±ì¥ì„±ì„ ë³´ì´ê³  ìˆìŠµë‹ˆë‹¤.",
            "sector_outlook": {
                "AI": "ë‹¨ê¸° ì¡°ì •ì—ë„ ë¶ˆêµ¬í•˜ê³  ì¥ê¸°ì  ì„±ì¥ì„±ì€ ë§¤ìš° ë†’ìŠµë‹ˆë‹¤.",
                "ë°”ì´ì˜¤": "ì‹ ì•½ ê°œë°œ ì„±ê³¼ì™€ ì •ë¶€ ì§€ì›ìœ¼ë¡œ ê¸ì •ì ì¸ ì „ë§ì…ë‹ˆë‹¤.",
                "ë°˜ë„ì²´": "AI ìˆ˜ìš” ì¦ê°€ë¡œ ê´€ë ¨ ê¸°ì—…ë“¤ì˜ ì‹¤ì ì´ ê°œì„ ë˜ê³  ìˆìŠµë‹ˆë‹¤."
            }
        }
    }
    
    print("=" * 80)
    print("ğŸ¯ ê°œì¸í™”ëœ íˆ¬ì í¬íŠ¸í´ë¦¬ì˜¤ ì œì•ˆ ì„œë¹„ìŠ¤ í…ŒìŠ¤íŠ¸")
    print("=" * 80)
    
    # í…ŒìŠ¤íŠ¸ 1: ì ê·¹íˆ¬ìí˜• ì‚¬ìš©ì (ìš”êµ¬ì‚¬í•­ ì˜ˆì‹œ)
    print("\nğŸ“Š í…ŒìŠ¤íŠ¸ 1: ì ê·¹íˆ¬ìí˜• ì‚¬ìš©ì (29ì„¸, 5ì²œë§Œì›)")
    print("-" * 60)
    result_1 = portfolio_advisor.analyze_portfolio(
        test_data_1["user_data"], 
        test_data_1["market_data"]
    )
    print(json.dumps(result_1, ensure_ascii=False, indent=2))
    
    # í…ŒìŠ¤íŠ¸ 2: ì•ˆì •í˜• ì‚¬ìš©ì
    print("\nğŸ“Š í…ŒìŠ¤íŠ¸ 2: ì•ˆì •í˜• ì‚¬ìš©ì (45ì„¸, 1ì–µì›)")
    print("-" * 60)
    result_2 = portfolio_advisor.analyze_portfolio(
        test_data_2["user_data"], 
        test_data_2["market_data"]
    )
    print(json.dumps(result_2, ensure_ascii=False, indent=2))
    
    # í…ŒìŠ¤íŠ¸ 3: ê³µê²©íˆ¬ìí˜• ì‚¬ìš©ì
    print("\nğŸ“Š í…ŒìŠ¤íŠ¸ 3: ê³µê²©íˆ¬ìí˜• ì‚¬ìš©ì (25ì„¸, 3ì²œë§Œì›)")
    print("-" * 60)
    result_3 = portfolio_advisor.analyze_portfolio(
        test_data_3["user_data"], 
        test_data_3["market_data"]
    )
    print(json.dumps(result_3, ensure_ascii=False, indent=2))
    
    print("\n" + "=" * 80)
    print("âœ… í…ŒìŠ¤íŠ¸ ì™„ë£Œ!")
    print("=" * 80)

if __name__ == "__main__":
    test_portfolio_advisor()
